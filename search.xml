<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[èš‚èšç®—æ³•]]></title>
    <url>%2F2019%2F05%2F03%2F%E8%9A%82%E8%9A%81%E7%AE%97%E6%B3%95%2F</url>
    <content type="text"></content>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GeneticAlgorithm(é—ä¼ ç®—æ³•)]]></title>
    <url>%2F2019%2F04%2F12%2FGeneticAlgorithm%2F</url>
    <content type="text"><![CDATA[â€‹ ç¬¬ä¸€ç¯‡å†™é—ä¼ ç®—æ³•ï¼Œä¸€æ˜¯å› ä¸ºæˆ‘æŽ¥è§¦ç¬¬ä¸€ä¸ªç®—æ³•ï¼Œå¦å¤–å°±æ˜¯å®ƒçš„ç”¨é€”å¾ˆå¹¿ï¼Œå¾ˆå¤šæ–¹å‘éƒ½èƒ½ç”¨åˆ°ã€‚ä¸€èˆ¬éƒ½ç”¨åœ¨è§£å†³ï¼šå‡½æ•°æœ€å€¼é—®é¢˜ã€TSPï¼ˆæ—…è¡Œå•†é—®é¢˜ï¼‰ã€èƒŒåŒ…é—®é¢˜ç­‰ç­‰ã€‚ â€‹ é—ä¼ ç®—æ³•å®Œå…¨çš„æ¨¡æ‹Ÿç”Ÿç‰©çš„é—ä¼ è¿‡ç¨‹ï¼Œæ‰€ä»¥ç®—æ³•çš„æ ¸å¿ƒä¹Ÿæ˜¯å¯ä»¥ç”¨ç”Ÿç‰©çš„é—ä¼ è¿‡ç¨‹æ¥ç†è§£ï¼šé—ä¼ å’Œå˜å¼‚ðŸ§¬ï¼Œé€‚è€…ç”Ÿå­˜ï¼ˆé€‰æ‹©ä¼˜èƒœè€…ï¼‰ã€‚ç®—æ³•çš„éš¾ç‚¹ä¹Ÿæ˜¯åœ¨å®žé™…ä¸šåŠ¡æˆ–è€…ä½¿ç”¨ä¸­ï¼Œå¦‚ä½•å°†å®žé™…é—®é¢˜è½¬åŒ–æˆæ•°å­¦æ¨¡åž‹ä¸­çš„æ¨¡åž‹ã€‚ å¼€å§‹ç¬¬ä¸€ä¸ªdemoï¼ˆè§£å†³TSPé—®é¢˜ï¼Œæ±‚æœ€çŸ­è·¯å¾„ï¼‰ï¼šâ€‹ ä»¥20ä¸ªåŸŽå¸‚ä¸¾ä¾‹ï¼Œæ‰¾å‡ºè€…20ä¸ªåŸŽå¸‚çš„æœ€çŸ­è·¯å¾„ã€‚ â€‹ é—ä¼ ç®—æ³•åœ¨è§£å†³è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œæ ¸å¿ƒæ˜¯ï¼šé—ä¼ ã€å˜å¼‚å‡½æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯ï¼Œè¿™é‡Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯ä¸€éƒ¨åˆ†åŸºå› æ¥è‡ªçˆ¶äº²ï¼Œä¸€éƒ¨åˆ†æ¥è‡ªæ¯äº²ï¼Œä¾‹å¦‚ï¼Œfather = [1, 4, 5, 2, 3], motner = [2, 4, 3, 5, 1] åˆ™å­©å­å¯èƒ½ä¸º [1, 4, 3, 2, 5],å‰åŠéƒ¨åˆ†åŸºå› æ¥è‡ªçˆ¶äº²ï¼ŒåŽåŠéƒ¨åˆ†æ¥è‡ªæ¯äº²ï¼Œé¡ºåºéƒ½éœ€è¦ä¿æŒçˆ¶æ¯çš„ã€‚å˜å¼‚å‘¢ï¼Œï¼Œå§¿åŠ¿ï¼Œéšæœºæ›´æ¢ä»»æ„ä¸¤ä¸ªä½ç½®çš„åŸŽå¸‚ä¸º[1, 4, 1,5, 2, 3], 5, 3æ¢ä½ç½®ã€‚ äº¤å‰å‡½æ•°ï¼ˆç”Ÿå­©å­çš„è¿‡ç¨‹ï¼‰12345678910111213141516171819202122232425def crossover(self, father, people): """äº¤å‰é…å¯¹å‡½æ•°ã€‚åŽŸç†æ˜¯ï¼Œé€‰æ‹©çˆ¶äº²çš„ä¸€éƒ¨åˆ†åŸŽå¸‚æŽ’åºï¼Œç„¶åŽå‰©ä½™çš„åŸŽå¸‚æŽ’åºæŒ‰ç…§æ¯äº²çš„æŽ’åºæ–¹å¼ç»„åˆæˆå­©å­è·¯çº¿æ–¹æ¡ˆ Arguments: father [city1,city2..] -- æ‰€æœ‰çš„åŸŽå¸‚æŽ’åº people [[city1,city2..],[city4,city10..]] -- æ‰€æœ‰çš„è·¯çº¿æ–¹æ¡ˆ Returns: [city1,city2..] -- ç”Ÿæˆçš„å­©å­è·¯çº¿æ–¹æ¡ˆæˆ–è€…çˆ¶äº²è·¯çº¿ """ if np.random.rand() &lt; self.cross_rate: # ä»Žpeopleä¸­é€‰æ‹©å¦ä¸€ä¸ªparent mother_index = np.random.randint(0, self.people_size, size=1) # é€‰æ‹©äº¤å‰çš„DNAä¸‹æ ‡ cross_points = np.random.randint(0, 2, self.DNA_size, dtype=np.bool) # é€‰æ‹©fatheréƒ¨åˆ†çš„åŸŽå¸‚ï¼ˆæŽ’åºæ–¹å¼ä¸ºfatherå·²æœ‰çš„æŽ’åºï¼‰ father_city = father[cross_points] # é€‰æ‹©fatheræ²¡é€‰ä¸Šçš„åŸŽå¸‚ï¼ˆæŽ’åºæ–¹å¼ä¸ºmotherä»¥åŽçš„æŽ’åºï¼‰ mother_city = people[mother_index, np.isin( people[mother_index].ravel(), father_city, invert=True)] child = np.concatenate((father_city, mother_city)) # time.sleep(10) # father[:] = np.concatenate((father_city, mother_city)) # return father return child return father å˜å¼‚å‡½æ•°1234567891011121314def mutate(self, child): """å˜å¼‚å‡½æ•°ã€‚æ¯ä¸ªåŸŽå¸‚éƒ½æœ‰å‡ çŽ‡äº§ç”Ÿå˜å¼‚ã€‚å˜å¼‚ï¼šéšæœºä¸Žè·¯çº¿ä¸Šçš„å¦å¤–ä¸€ä¸ªåŸŽå¸‚äº¤æ¢ä½ç½® Arguments: child [int] -- è·¯çº¿æ–¹æ¡ˆ Returns: child [int] -- è·¯çº¿æ–¹æ¡ˆ """ for point_index in range(self.DNA_size): if np.random.rand() &lt; self.mutation_rate: swap_point_index = np.random.randint(0, self.DNA_size) swap_A, swap_B = child[point_index], child[swap_point_index] child[point_index], child[swap_point_index] = swap_B, swap_A return child å®Œæˆäº†é—ä¼ å˜å¼‚çš„è¿‡ç¨‹ï¼Œç”Ÿç‰©ç§ç¾¤å°±ä¼šå¢žå¤šï¼ŒæŽ¥ä¸‹æ¥å°±æ˜¯é€‚è€…ç”Ÿå­˜ï¼Œæ‹©ä¼˜çš„è¿‡ç¨‹ã€‚ä½†æ˜¯åœ¨åšé€‰æ‹©çš„æ—¶å€™ï¼Œéœ€è¦æœ‰ä¸€ä¸ªé€‰æ‹©æ ‡å‡†æ¥åˆ¤æ–­é‚£ä¸ªä¸ªä½“æ›´é€‚åˆã€‚åœ¨è§£å†³TSPï¼Œé‚£ä¹ˆæ¯ä¸ªä¸ªä½“çš„è·¯çº¿é•¿çŸ­åˆ™ä½œä¸ºåˆ¤æ–­ä¾æ®ï¼ˆè·¯çº¿çŸ­çš„ä¼˜èƒœï¼‰ã€‚è¿™é‡Œå°±éœ€è¦ä¸€ä¸ªè®¡ç®—é€‚åº”æ€§çš„å‡½æ•°ã€‚ é€‚åº”æ€§è®¡ç®—å‡½æ•°12345678910111213141516171819def get_fitness(self, xs_values, ys_values): """è®¡ç®—æ¯æ¡è·¯çº¿çš„è·ç¦»distanceï¼Œå¹¶ä¸”ä»¥è·ç¦»çš„å€’æ•°ä¸ºeçš„æŒ‡æ•°çš„å€¼ä½œä¸ºfitness Arguments: xs_values [[float]]-- æ‰€æœ‰è·¯çº¿çš„xåæ ‡åˆ—è¡¨ ys_values [[float]]-- æ‰€æœ‰è·¯çº¿çš„yåæ ‡åˆ—è¡¨ Returns: fitness [float] -- æ¯æ¡è·¯çº¿çš„é€‚åº”æ€§ total_distance [float] -- æ¯æ¡è·¯çº¿çš„è·ç¦» """ total_distance = np.empty((xs_values.shape[0], ), dtype=np.float64) for index, (x_values, y_values) in enumerate(zip(xs_values, ys_values)): total_distance[index] = np.sum( np.sqrt(np.square(np.diff(x_values)) + np.square(np.diff(y_values)))) fitness = np.exp(self.DNA_size * 2 / total_distance) # è¿™é‡Œä¸ºä»€ä¹ˆè¦ä¹˜ä»¥self.DNA_size * 2ï¼Œå› ä¸ºåŸºæ•°å¤ªå°ï¼Œfitnessä¹‹é—´å·®è·å¤ªå°ï¼Œåœ¨åšselectçš„æ—¶å€™å°±ä¼šæ¯ä¸ªæ¦‚çŽ‡å‡ ä¹Žç›¸ç­‰äº†ï¼Œæ”¶æ•›å¤ªæ…¢ï¼Œæ”¾å¤§åŽæ¦‚çŽ‡å·®å°±æ›´å‡¸æ˜¾ # fitness1 = np.exp(1 / total_distance) # print("???????", fitness, fitness1) return fitness, total_distance é€‰æ‹©å‡½æ•°è¿™ä¸ªé€‰æ‹©å‡½æ•°çš„æ€æƒ³æ˜¯ï¼Œä»Žç§ç¾¤ä¸­é€‰æ‹©æ–°çš„ç§ç¾¤ï¼Œæ¯ä¸ªä¸ªä½“éƒ½å¯ä»¥è¢«é‡å¤é€‰æ‹©ï¼Œä½†æ˜¯é€‚åº”æ€§é«˜çš„ä¸ªä½“è¢«é‡å¤é€‰æ‹©çš„æ¦‚çŽ‡é«˜ï¼Œé€‚åº”æ€§ä½Žçš„ä¸ªä½“ï¼Œå¯èƒ½ä¸€æ¬¡éƒ½é€‰ä¸ä¸Šï¼Œreplace=Trueè¡¨ç¤ºå¯è¢«é‡å¤é€‰æ‹©ï¼Œp=fitness / fitness.sum()è¡¨ç¤ºæ¯ä¸ªä¸ªä½“çš„é€‰æ‹©æ¦‚çŽ‡ 123456def select(self, fitness): """é€‰æ‹©å‡½æ•° """ index = np.random.choice(np.arange( self.people_size), size=self.people_size, replace=True, p=fitness / fitness.sum()) return self.people[index] è¿›åŒ–å‡½æ•°å½“å‰ç§ç¾¤çš„ä¸€æ¬¡è¿›åŒ–ï¼Œå…ˆæ ¹æ®é€‚åº”æ€§é€‰æ‹©æ–°çš„ç§ç¾¤ï¼Œç„¶åŽåœ¨å¯¹æ¯ä¸ªä¸ªä½“è¿›è¡Œäº¤å‰é—ä¼ å¹¶å¯¹é—ä¼ çš„æ–°ä¸ªä½“äº§ç”Ÿå˜å¼‚ 12345678910111213def evolve(self, fitness): """è¿›åŒ–å‡½æ•°ï¼ˆä¸€æ¬¡è¿›åŒ–ï¼‰ Arguments: fitness &#123;[type]&#125; -- [description] """ people = self.select(fitness) people_copy = people.copy() for father in people: child = self.crossover(father, people_copy) child = self.mutate(child) # father[:] = child father = child self.people = people æ•´ä¸ªæ±‚è§£çš„æµç¨‹é¦–å…ˆåˆå§‹åŒ–ä¸€ä¸ªç”Ÿç‰©ç§ç¾¤ï¼š 12ga = GA(DNA_size=CITY_NUM, cross_rate=CROSS_RATE, mutation_rate=MUTATION_RATE, people_size=POP_SIZE) # åˆå§‹åŒ–ç§ç¾¤ åˆå§‹åŒ–20ä¸ªåŸŽå¸‚: 1env = TSP(city_num=CITY_NUM) # åˆå§‹åŒ–20æ˜¯ä¸ªåŸŽå¸‚ ç„¶åŽæ ¹æ®å®šä¹‰çš„é—ä¼ ä»£æ•°æ¥é€ä»£è¿›åŒ– 123456789101112for generation in range(N_GENERATION): # è®¡ç®—å‡ºæ‰€æœ‰ä¸ªä½“çš„åæ ‡ x_values, y_values = ga.translate_DNA(ga.people, env.city_position) # è®¡ç®—å‡ºæ‰€æœ‰ä¸ªä½“çš„é€‚åº”æ€§+è·¯ç¨‹ fitness, total_distance = ga.get_fitness(x_values, y_values) # é—ä¼ æ¼”å˜ ga.evolve(fitness) # æ‰¾å‡ºé€‚åº”æ€§æœ€é«˜çš„ä¸ªä½“ best_idx = np.argmax(fitness) print('Gen:', generation, '| best fit: %.2f' % fitness[best_idx],) env.ploting(x_values[best_idx], y_values[best_idx], total_distance[best_idx]) å®Œæ•´ä»£ç ä¼ é€é—¨ï¼š https://github.com/RoryXiang/MCL_dairy/blob/master/GeneticAlgorithm/shortest_path.py ä¸‹ä¸€ç¯‡æ˜¯èš‚èšç®—æ³•æ¥è§£å†³TSP]]></content>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
</search>
